# 開発ガイドライン

このドキュメントは、S WORKSプロジェクトの開発指針をまとめたものです。

---

## 1. LLM（大規模言語モデル）活用方針

### 1.1 複数LLMへの作業委譲を推奨するケース

以下のケースでは、別のLLM（無料LLMやサブスクリプション型LLM）への作業委譲を積極的に検討してください。

#### コスト削減: 大量のクレジット消費が見込まれる作業

- **大規模リファクタリング**: 複数ファイルにまたがる構造変更
- **一括置換作業**: 用語統一、変数名変更など
- **データマイグレーション**: 大量データの変換処理
- **テスト作成**: 多数のテストケース作成

#### 効率化: チーム開発（並行作業）で効率的な場合

複数の作業を同時に進めた方が効率的な場合、指示書を作成して別のLLMに並行作業を依頼する。

- **独立した機能開発**: 互いに依存しない機能を同時開発
  - 例: 管理画面の新機能とワーカー向け画面の新機能を並行開発
- **フロントエンド/バックエンド分離作業**: UI側とAPI側を並行開発
  - 例: APIの実装と画面のモック作成を同時進行
- **ドキュメント作成**: コード作業と並行してドキュメント整備
- **バグ修正と新機能開発の同時進行**: 緊急のバグ修正と予定機能の開発を並行

### 1.2 別LLMへの作業委譲フロー

1. **準備**
   - 現在の状態をGitにコミット・プッシュ
   - 作業用ブランチを作成（例: `feature/xxx`）

2. **指示書作成**
   - 詳細な作業指示をMarkdownで作成（`docs/`配下に保存）
   - 含めるべき内容:
     - 作業の目的と背景
     - 変更対象のファイル一覧
     - 具体的な変更内容とコード例
     - 完了条件とテスト方法
     - 注意事項（mainブランチは触らない等）

3. **委譲時の必須注意事項**
   以下を必ず明記する:
   ```
   【重要】
   - mainブランチは絶対に変更しないでください
   - 作業は feature/xxx ブランチで行ってください
   - 指示書に記載された作業のみ行い、他の作業は行わないでください
   - 作業完了後は変更内容をコミットしてください
   ```

4. **作業完了後のレビュー**
   - 変更内容を確認（`git diff`、`npm run build`）
   - 必要に応じて修正
   - mainへのマージ検討

5. **クリーンアップ**
   - 作業完了後、指示書ファイルは削除する（`docs/`に残さない）
   - 不要になった一時ファイル・スクリプトも削除

### 1.3 作業委譲の実例

```markdown
# リファクタリング作業指示書

## 概要
Job構造を1:1から1:Nへ変更する

## 前提条件
- ブランチ: feature/job-structure-refactor
- 現在のコミット: xxxx

## 変更対象ファイル
1. src/lib/actions.ts - createJob, updateJob関数
2. app/admin/jobs/page.tsx - 求人一覧
...

## 変更内容
### Phase 1: バックエンド
...

## 完了条件
- npm run build が成功すること
- 既存機能が動作すること

## 注意事項
- mainブランチには絶対に変更を加えないこと
- 指示書に記載された作業のみ行うこと
```

---

## 2. Git運用ルール

### 2.1 ブランチ戦略

- `main`: 本番環境相当。直接コミット禁止
- `feature/xxx`: 機能開発用
- `fix/xxx`: バグ修正用
- `refactor/xxx`: リファクタリング用

### 2.2 コミットメッセージ

日本語で簡潔に記述:
```
機能追加: 求人編集ページにカレンダー追加
バグ修正: updateJob関数のbreak_time型エラー
リファクタリング: Job構造を1:N関係に変更
```

---

## 3. コード品質

### 3.1 必須確認事項

- `npm run build` が成功すること
- TypeScriptエラーがないこと
- コンソールエラーがないこと

### 3.2 コーディング規約

- TypeScript strict mode
- Tailwind CSSでスタイリング
- Server ActionsでDB操作

---

## 4. 技術スタック

| カテゴリ | 技術 |
|---------|------|
| フレームワーク | Next.js 14 (App Router) |
| 言語 | TypeScript |
| スタイリング | Tailwind CSS |
| DB | PostgreSQL (Docker) |
| ORM | Prisma |
| 認証 | NextAuth.js |

---

## 5. 開発環境

### 5.1 起動コマンド

```bash
# 開発サーバー起動
npm run dev

# データベース起動
docker-compose up -d

# Prisma Studio
npx prisma studio

# ビルド確認
npm run build
```

### 5.2 ポート

- 開発サーバー: http://localhost:3000
- Prisma Studio: http://localhost:5555
- PostgreSQL: localhost:5432

---

## 更新履歴

- 2024-11-29: 初版作成。LLM並行作業の指針を追加
