# テスト設計書 - 2026/01/01-02 修正分

## 概要
デバッグシートで完了した27件の修正に対するE2Eテスト設計。

## テストファイル構成

```
tests/e2e/fixes-2026-01/
├── ui-layout.spec.ts        # UI/レイアウト系 (6件)
├── form-validation.spec.ts  # フォームバリデーション系 (9件)
├── navigation.spec.ts       # ナビゲーション系 (3件)
├── display-text.spec.ts     # 表示/テキスト系 (4件)
├── features.spec.ts         # 機能系 (5件)
└── fixtures/
    └── test-helpers.ts      # 共通ヘルパー
```

---

## 1. UI/レイアウト系テスト (`ui-layout.spec.ts`)

| ID | 修正内容 | テストケース |
|---|---|---|
| #35 | 求人ページ左寄り（safe-area対応） | モバイルビューポートで余白確認 |
| #9 | 求人詳細余白・申込条件ヘッダー | セクションヘッダー存在確認 |
| #36 | 求人プレビュー中央配置 | max-w-lg mx-auto適用確認 |
| #12 | タブドット色統一 | ドット色がバッジ色と一致確認 |
| #27 | 施設名ヘッダー表示 | サイドバーに施設名表示確認 |
| #29 | シフト休憩時間表示 | モーダルに休憩時間表示確認 |

**テスト戦略:**
- ビジュアル検証はCSSクラス/スタイル属性の確認
- モバイル対応はviewport設定で検証

---

## 2. フォームバリデーション系テスト (`form-validation.spec.ts`)

| ID | 修正内容 | テストケース |
|---|---|---|
| #24 | PW要件8文字統一 | 6文字でエラー、8文字で成功 |
| #38 | メール二重入力確認 | 不一致でエラー表示 |
| #45 | パスワードリセットエラー表示 | 同一パスワードで明確なエラー |
| #48 | 実働時間自動計算 | 開始-終了-休憩から計算確認 |
| #7 | 時給コンマ表示 | 1200→¥1,200表示確認 |
| #33 | 時給入力0残り問題 | 再入力時に0が残らない |
| #15 | 休憩時間バリデーション | 6h超→45分、8h超→60分 |
| #52 | 必須項目エラー表示 | 赤枠+テキストエラー表示 |
| #73 | フリガナIME問題 | iOS IME composition対応 |

**テスト戦略:**
- 入力→blur→検証の流れでテスト
- data-testid属性を活用

---

## 3. ナビゲーション系テスト (`navigation.spec.ts`)

| ID | 修正内容 | テストケース |
|---|---|---|
| #8 | 工事中ページ戻るボタン | 戻る→履歴orホームへ遷移 |
| #57 | メッセージ内リンク同タブ遷移 | /my-jobs/リンクが同タブで開く |
| #62 | 求人詳細ホームアイコン | ホームアイコンクリック→トップへ |

**テスト戦略:**
- page.url()で遷移先確認
- target属性の確認

---

## 4. 表示/テキスト系テスト (`display-text.spec.ts`)

| ID | 修正内容 | テストケース |
|---|---|---|
| #11 | 「締切済み」→「募集終了」 | 締切後求人で「募集終了」表示 |
| #16 | 交通費0円「なし」表示 | 交通費0の求人で「なし」表示 |
| #32 | 経験複数選択説明 | 「※複数選択できます」表示確認 |
| #47 | 緊急連絡先任意化 | 必須マーク(*)がない確認 |

**テスト戦略:**
- テキストコンテンツの存在確認
- 条件付き表示の検証

---

## 5. 機能系テスト (`features.spec.ts`)

| ID | 修正内容 | テストケース |
|---|---|---|
| #61 | 不採用通知送信 | CANCELLED時にメッセージ作成確認 |
| #63 | 審査求人採用確認ダイアログ | 採用ボタン→ダイアログ表示 |
| #64 | 限定求人機能 | 限定求人作成・表示確認 |
| #72 | 求人/応募管理ソート | ソート切替で順序変更確認 |
| #74 | メール認証機能 | 認証フロー確認 |

**テスト戦略:**
- 既存テストとの重複を避ける
- 統合フローとして検証

---

## 実行コマンド

```bash
# 全テスト実行
npx playwright test tests/e2e/fixes-2026-01/

# 個別実行
npx playwright test tests/e2e/fixes-2026-01/ui-layout.spec.ts
npx playwright test tests/e2e/fixes-2026-01/form-validation.spec.ts

# レポート生成
npx playwright test tests/e2e/fixes-2026-01/ --reporter=html
```

---

## 注意事項

1. **既存テストとの重複回避**
   - job-creation.spec.ts と重複する限定求人テストは参照のみ
   - working-hours-calc.spec.ts が既に実働時間計算をカバー

2. **テストデータ**
   - setup-test-data.spec.ts で必要なテストデータを事前作成
   - テストアカウントは fixtures/test-accounts.ts を使用

3. **モバイル対応**
   - viewportを `{ width: 375, height: 812 }` (iPhone X相当) で検証
