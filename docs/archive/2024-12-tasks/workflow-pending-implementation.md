# æœªå®Œäº†ä½œæ¥­ã®å¯¾å¿œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ãƒ‡ãƒãƒƒã‚°ã‚·ãƒ¼ãƒˆã§æœªå¯¾å¿œãƒ»èª¿æŸ»ä¸­ã®é …ç›®ã‚’å„ªå…ˆåº¦é †ã«å¯¾å¿œã™ã‚‹ãŸã‚ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚

## ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```
main
  â”œâ”€â”€ fix/critical-bugs          # ç·Šæ€¥ãƒã‚°å¯¾å¿œ
  â”œâ”€â”€ fix/high-priority-bugs     # é«˜å„ªå…ˆåº¦ãƒã‚°
  â”œâ”€â”€ feature/notifications      # é€šçŸ¥æ©Ÿèƒ½å®Ÿè£…
  â”œâ”€â”€ feature/limited-jobs       # é™å®šãƒ»æŒ‡åæ±‚äººæ©Ÿèƒ½
  â””â”€â”€ improve/ux-enhancements    # UXæ”¹å–„ï¼ˆæ™®é€šå„ªå…ˆåº¦ï¼‰
```

## å„ªå…ˆåº¦åˆ¥å¯¾å¿œä¸€è¦§

### ğŸš¨ ç·Šæ€¥ï¼ˆCriticalï¼‰- å³æ™‚å¯¾å¿œ

| ID | ç¨®åˆ¥ | æ¦‚è¦ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å¯¾å¿œãƒ–ãƒ©ãƒ³ãƒ |
|----|------|------|------------|-------------|
| #69 | ãƒã‚° | æ±‚äººä¸€è¦§ã®è¡¨ç¤ºå•é¡Œï¼ˆé…ã„ã€è¡¨ç¤ºãƒã‚°ï¼‰ | èª¿æŸ»ä¸­ | fix/critical-bugs |
| #71 | ãã®ä»– | ãƒ¡ãƒ¼ãƒ«ãƒ»é€šçŸ¥æ©Ÿèƒ½æœªå®Ÿè£… | èª¿æŸ»ä¸­ | feature/notifications |
| #72 | ãƒã‚° | æ±‚äººç®¡ç†ãƒ»å¿œå‹Ÿç®¡ç†ã®ã‚½ãƒ¼ãƒˆå•é¡Œ | æœªå¯¾å¿œ | fix/critical-bugs |
| #64 | æ©Ÿèƒ½ | é™å®šãƒ»æŒ‡åæ±‚äººæ©Ÿèƒ½ | å¯¾å¿œãƒ»æœªãƒã‚§ãƒƒã‚¯ | feature/limited-jobs |

### ğŸ”´ é«˜ï¼ˆHighï¼‰- 1é€±é–“ä»¥å†…å¯¾å¿œ

| ID | ç¨®åˆ¥ | æ¦‚è¦ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å¯¾å¿œãƒ–ãƒ©ãƒ³ãƒ |
|----|------|------|------------|-------------|
| #67 | ãƒã‚° | ä»•äº‹ã‚’æ¢ã™ãƒšãƒ¼ã‚¸netlifyã‚¨ãƒ©ãƒ¼ | èª¿æŸ»ä¸­ | fix/high-priority-bugs |
| #70 | ãã®ä»– | å…¨ä½“çš„ãªã‚¹ãƒ”ãƒ¼ãƒ‰é…ã„ | èª¿æŸ»ä¸­ | improve/performance |
| #35 | ææ¡ˆ | æ±‚äººãƒšãƒ¼ã‚¸å·¦å¯„ã‚Š | æœªå¯¾å¿œ | improve/ux-enhancements |
| #58 | ææ¡ˆ | èº«åˆ†è¨¼æ’®å½±æ©Ÿèƒ½ | æœªå¯¾å¿œ | feature/id-verification |
| #38 | ææ¡ˆ | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æœ‰åŠ¹æ€§ç¢ºèª | æœªå¯¾å¿œ | feature/email-verification |

### ğŸŸ¡ æ™®é€šï¼ˆMediumï¼‰- 2é€±é–“ä»¥å†…å¯¾å¿œ

| ID | ç¨®åˆ¥ | æ¦‚è¦ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|----|------|------|------------|
| #9 | ææ¡ˆ | æ±‚äººè©³ç´°ãƒšãƒ¼ã‚¸ä½™ç™½å•é¡Œ | æœªå¯¾å¿œ |
| #27 | ææ¡ˆ | æ–½è¨­åãƒ»æ³•äººåãƒ˜ãƒƒãƒ€ãƒ¼è¡¨ç¤º | æœªå¯¾å¿œ |
| #45 | ææ¡ˆ | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰åŒä¸€è¨­å®šã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | æœªå¯¾å¿œ |
| #48 | ææ¡ˆ | å®Ÿåƒæ™‚é–“è‡ªå‹•è¨ˆç®— | æœªå¯¾å¿œ |
| #62 | ææ¡ˆ | ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæµå…¥æ™‚ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ | æœªå¯¾å¿œ |
| #65 | ææ¡ˆ | æ±‚äºº1åˆ—è¡¨ç¤º | æœªå¯¾å¿œ |
| #16 | ææ¡ˆ | äº¤é€šè²»0å††è¡¨ç¤º | æœªå¯¾å¿œ |
| #28 | ææ¡ˆ | æ¥­å‹™è¨­å®šã¨ä»•äº‹è©³ç´°ãƒ†ãƒ³ãƒ—ãƒ¬é€£æº | æœªå¯¾å¿œ |
| #36 | ææ¡ˆ | æ±‚äººãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å·¦å¯„ã‚Š | æœªå¯¾å¿œ |
| #61 | ææ¡ˆ | ä¸æ¡ç”¨é€šçŸ¥ | æœªå¯¾å¿œ |
| #63 | ææ¡ˆ | ãƒãƒƒãƒãƒ³ã‚°ç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— | æœªå¯¾å¿œ |
| #7 | ææ¡ˆ | æ™‚çµ¦ã‚³ãƒ³ãƒè¡¨ç¤º | æœªå¯¾å¿œ |
| #32 | ææ¡ˆ | çµŒé¨“è¿½åŠ ãƒœã‚¿ãƒ³ | æœªå¯¾å¿œ |
| #42 | ææ¡ˆ | å¸Œæœ›æ™‚åˆ»ä¸è¦æ¤œè¨ | æœªå¯¾å¿œ |
| #47 | ææ¡ˆ | ç·Šæ€¥é€£çµ¡å…ˆä»»æ„åŒ– | æœªå¯¾å¿œ |
| #57 | ææ¡ˆ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸URLã‚¿ãƒ–é·ç§» | æœªå¯¾å¿œ |
| #10 | ãƒã‚° | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ›´æ–° | è¦ãƒ’ã‚¢ãƒªãƒ³ã‚° |

### ğŸŸ¢ ä½ï¼ˆLowï¼‰- ãƒãƒƒã‚¯ãƒ­ã‚°

| ID | ç¨®åˆ¥ | æ¦‚è¦ |
|----|------|------|
| #24 | ææ¡ˆ | PWå¤‰æ›´6æ¡/8æ¡æ•´åˆæ€§ |
| #12 | ææ¡ˆ | ã‚¿ãƒ–è‰²çµ±ä¸€ |
| #59 | ææ¡ˆ | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é …ç›®åˆ†é›¢ |
| #13 | ææ¡ˆ | å¸Œæœ›é–‹å§‹æ™‚åˆ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| #56 | ææ¡ˆ | é€šå¸³ã‚³ãƒ”ãƒ¼ä¸è¦ãƒ»éŠ€è¡Œé¸æŠ |

### â“ è¦ãƒ’ã‚¢ãƒªãƒ³ã‚°

| ID | æ¦‚è¦ | ç¢ºèªäº‹é … |
|----|------|----------|
| #44 | ãƒ¯ãƒ¼ã‚«ãƒ¼ç™»éŒ²æƒ…å ±æ•´ç† | å„æ®µéšã®å¿…è¦æƒ…å ±ã®è©³ç´° |
| #25 | æ³•äººç•ªå·ã§ã®å‹¤å‹™æ™‚é–“ç®¡ç† | è¤‡æ•°æ–½è¨­ç®¡ç†ã®ä»•æ§˜ |
| #39 | çµŒé¨“å…¥åŠ›æ–¹æ³•æ”¹å–„ | UIã®è¤‡é›‘ã•ã¨æ“ä½œæ€§ã®ãƒãƒ©ãƒ³ã‚¹ |

---

## Phase 1: ç·Šæ€¥ãƒã‚°å¯¾å¿œ

### ãƒ–ãƒ©ãƒ³ãƒ: `fix/critical-bugs`

#### #72: æ±‚äººç®¡ç†ãƒ»å¿œå‹Ÿç®¡ç†ã®ã‚½ãƒ¼ãƒˆå•é¡Œ

**å•é¡Œ**: ã‚½ãƒ¼ãƒˆãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ãªã„

**èª¿æŸ»ãƒã‚¤ãƒ³ãƒˆ**:
```typescript
// ç¢ºèªãƒ•ã‚¡ã‚¤ãƒ«
app/admin/jobs/page.tsx        // æ±‚äººç®¡ç†
app/admin/applications/page.tsx // å¿œå‹Ÿç®¡ç†
```

**å¯¾å¿œæ–¹é‡**:
1. ç¾åœ¨ã®ã‚½ãƒ¼ãƒˆãƒ­ã‚¸ãƒƒã‚¯ç¢ºèª
2. æœŸå¾…ã™ã‚‹ä»•æ§˜ã®æ˜ç¢ºåŒ–
3. ã‚½ãƒ¼ãƒˆæ¡ä»¶ã®ä¿®æ­£

**ãƒ†ã‚¹ãƒˆ**:
```typescript
// tests/e2e/fix/sort-fix.spec.ts
test.describe('ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ä¿®æ­£', () => {
  test('æ±‚äººä¸€è¦§ãŒä½œæˆæ—¥é †ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã‚‹', async ({ page }) => {
    await loginAsFacilityAdmin(page);
    await page.goto('/admin/jobs');

    // ä½œæˆæ—¥ã§ã‚½ãƒ¼ãƒˆ
    await page.click('[data-sort="createdAt"]');

    const dates = await page.locator('[data-created-at]').allTextContents();
    // é™é †ç¢ºèª
    for (let i = 0; i < dates.length - 1; i++) {
      expect(new Date(dates[i]) >= new Date(dates[i + 1])).toBeTruthy();
    }
  });

  test('å¿œå‹Ÿä¸€è¦§ãŒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é †ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã‚‹', async ({ page }) => {
    await loginAsFacilityAdmin(page);
    await page.goto('/admin/applications');

    await page.click('[data-sort="status"]');
    // æœŸå¾…ã•ã‚Œã‚‹ã‚½ãƒ¼ãƒˆé †ã®ç¢ºèª
  });
});
```

#### #69: æ±‚äººä¸€è¦§ã®è¡¨ç¤ºå•é¡Œ

**å•é¡Œ**:
- è¡¨ç¤ºãŒé…ã„
- å¿œå‹Ÿã§ããªã„ã¯ãšã®æ±‚äººãŒè¡¨ç¤ºã•ã‚Œã‚‹
- è¡¨ç¤ºã•ã‚Œã‚‹ã¹ãæ±‚äººãŒå‡ºã¦ã“ãªã„

**èª¿æŸ»ãƒã‚¤ãƒ³ãƒˆ**:
```typescript
// ç¢ºèªãƒ•ã‚¡ã‚¤ãƒ«
app/jobs/page.tsx              // æ±‚äººä¸€è¦§
app/api/jobs/route.ts          // API
lib/actions/job-actions.ts     // Server Actions
```

**å¯¾å¿œæ–¹é‡**:
1. ã‚¯ã‚¨ãƒªæœ€é©åŒ–ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¢ºèªï¼‰
2. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£
3. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥è¦‹ç›´ã—

**ãƒ†ã‚¹ãƒˆ**:
```typescript
// tests/e2e/fix/job-list-fix.spec.ts
test.describe('æ±‚äººä¸€è¦§è¡¨ç¤ºä¿®æ­£', () => {
  test('éå»ã®æ±‚äººãŒè¡¨ç¤ºã•ã‚Œãªã„', async ({ page }) => {
    await page.goto('/jobs');
    await page.waitForSelector('.job-card');

    const today = new Date().toISOString().split('T')[0];
    const workDates = await page.locator('[data-work-date]').allTextContents();

    for (const date of workDates) {
      expect(date >= today).toBeTruthy();
    }
  });

  test('3ç§’ä»¥å†…ã«æ±‚äººä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    const startTime = Date.now();
    await page.goto('/jobs');
    await page.waitForSelector('.job-card');
    const loadTime = Date.now() - startTime;

    expect(loadTime).toBeLessThan(3000);
  });
});
```

---

## Phase 2: é™å®šãƒ»æŒ‡åæ±‚äººæ©Ÿèƒ½

### ãƒ–ãƒ©ãƒ³ãƒ: `feature/limited-jobs`

#### #64: é™å®šãƒ»æŒ‡åæ±‚äººæ©Ÿèƒ½

**æ©Ÿèƒ½è¦ä»¶**:
1. é™å®šæ±‚äººï¼ˆç‰¹å®šæ¡ä»¶ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã¿è¡¨ç¤ºï¼‰
2. æŒ‡åæ±‚äººï¼ˆç‰¹å®šãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã¿ã«é€ä¿¡ï¼‰

**å®Ÿè£…è¨ˆç”»**:

```typescript
// 1. DBã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ
// prisma/schema.prisma
model Job {
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  ...

  // é™å®šãƒ»æŒ‡åé–¢é€£
  visibility       JobVisibility @default(PUBLIC)
  targetWorkerIds  String[]      @default([])
  targetConditions Json?
}

enum JobVisibility {
  PUBLIC      // å…¬é–‹
  LIMITED     // é™å®šï¼ˆæ¡ä»¶ä»˜ãï¼‰
  NOMINATED   // æŒ‡åï¼ˆç‰¹å®šãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã¿ï¼‰
}

// 2. æ±‚äººä½œæˆãƒ•ã‚©ãƒ¼ãƒ æ‹¡å¼µ
// components/admin/JobForm.tsx
const visibilityOptions = [
  { value: 'PUBLIC', label: 'ä¸€èˆ¬å…¬é–‹' },
  { value: 'LIMITED', label: 'é™å®šå…¬é–‹' },
  { value: 'NOMINATED', label: 'æŒ‡å' },
];

// 3. ãƒ¯ãƒ¼ã‚«ãƒ¼é¸æŠUI
// components/admin/WorkerSelector.tsx
export function WorkerSelector({
  onSelect
}: {
  onSelect: (workerIds: string[]) => void
}) {
  // ãƒ¯ãƒ¼ã‚«ãƒ¼æ¤œç´¢ãƒ»é¸æŠUI
}

// 4. æ±‚äººä¸€è¦§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
// lib/actions/job-actions.ts
export async function getVisibleJobs(workerId: string) {
  // PUBLIC: å…¨å“¡ã«è¡¨ç¤º
  // LIMITED: æ¡ä»¶ã«åˆè‡´ã™ã‚‹ãƒ¯ãƒ¼ã‚«ãƒ¼ã«è¡¨ç¤º
  // NOMINATED: targetWorkerIdsã«å«ã¾ã‚Œã‚‹ãƒ¯ãƒ¼ã‚«ãƒ¼ã«è¡¨ç¤º
}
```

**ãƒ†ã‚¹ãƒˆ**:
```typescript
// tests/e2e/feature/limited-jobs.spec.ts
test.describe('é™å®šãƒ»æŒ‡åæ±‚äººæ©Ÿèƒ½', () => {
  test('æŒ‡åæ±‚äººãŒæŒ‡å®šãƒ¯ãƒ¼ã‚«ãƒ¼ã«ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    // 1. æ–½è¨­ç®¡ç†è€…ã§æŒ‡åæ±‚äººä½œæˆ
    await loginAsFacilityAdmin(page);
    await page.goto('/admin/jobs/new');
    await page.selectOption('[name="visibility"]', 'NOMINATED');
    await page.click('[data-testid="select-worker"]');
    await page.click('[data-worker-id="worker-1"]');
    await page.click('button[type="submit"]');

    // 2. æŒ‡åã•ã‚ŒãŸãƒ¯ãƒ¼ã‚«ãƒ¼ã§ç¢ºèª
    await loginAsWorker(page, 'worker-1');
    await page.goto('/jobs');
    await expect(page.getByText('æŒ‡åæ±‚äººã‚¿ã‚¤ãƒˆãƒ«')).toBeVisible();

    // 3. æŒ‡åã•ã‚Œã¦ã„ãªã„ãƒ¯ãƒ¼ã‚«ãƒ¼ã§ç¢ºèª
    await loginAsWorker(page, 'worker-2');
    await page.goto('/jobs');
    await expect(page.getByText('æŒ‡åæ±‚äººã‚¿ã‚¤ãƒˆãƒ«')).not.toBeVisible();
  });

  test('é™å®šæ±‚äººãŒæ¡ä»¶åˆè‡´ãƒ¯ãƒ¼ã‚«ãƒ¼ã«ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    // æ¡ä»¶: ä»‹è­·ç¦ç¥‰å£«è³‡æ ¼ä¿æŒè€…ã®ã¿
    await loginAsFacilityAdmin(page);
    await page.goto('/admin/jobs/new');
    await page.selectOption('[name="visibility"]', 'LIMITED');
    await page.check('[data-condition="certification-careWorker"]');
    await page.click('button[type="submit"]');

    // ä»‹è­·ç¦ç¥‰å£«ä¿æŒãƒ¯ãƒ¼ã‚«ãƒ¼ã§ç¢ºèª
    await loginAsWorkerWithCertification(page, 'careWorker');
    await page.goto('/jobs');
    await expect(page.getByText('é™å®šæ±‚äººã‚¿ã‚¤ãƒˆãƒ«')).toBeVisible();
  });
});
```

---

## Phase 3: é€šçŸ¥æ©Ÿèƒ½å®Ÿè£…

### ãƒ–ãƒ©ãƒ³ãƒ: `feature/notifications`

#### #71: ãƒ¡ãƒ¼ãƒ«ãƒ»é€šçŸ¥æ©Ÿèƒ½

**æ©Ÿèƒ½è¦ä»¶**:
1. ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ï¼ˆå¿œå‹Ÿå—ä»˜ã€ãƒãƒƒãƒãƒ³ã‚°æˆç«‹ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ï¼‰
2. ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶/ã‚¢ãƒ—ãƒªï¼‰
3. ã‚¢ãƒ—ãƒªå†…é€šçŸ¥

**å®Ÿè£…è¨ˆç”»**:

```typescript
// 1. é€šçŸ¥è¨­å®šãƒ¢ãƒ‡ãƒ«
// prisma/schema.prisma
model NotificationSetting {
  id        String   @id @default(cuid())
  userId    String   @unique
  email     Boolean  @default(true)
  push      Boolean  @default(true)
  inApp     Boolean  @default(true)

  // é€šçŸ¥ç¨®åˆ¥ã”ã¨ã®è¨­å®š
  onApplication   Boolean @default(true)
  onMatching      Boolean @default(true)
  onMessage       Boolean @default(true)
  onJobUpdate     Boolean @default(true)
}

model Notification {
  id        String   @id @default(cuid())
  userId    String
  type      NotificationType
  title     String
  body      String
  read      Boolean  @default(false)
  createdAt DateTime @default(now())
}

// 2. é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
// lib/services/notification-service.ts
export class NotificationService {
  async send(userId: string, notification: NotificationPayload) {
    const settings = await this.getSettings(userId);

    if (settings.email) {
      await this.sendEmail(userId, notification);
    }
    if (settings.push) {
      await this.sendPush(userId, notification);
    }
    if (settings.inApp) {
      await this.saveInApp(userId, notification);
    }
  }

  private async sendEmail(userId: string, notification: NotificationPayload) {
    // Resend/SendGridç­‰ã‚’ä½¿ç”¨
  }
}

// 3. é€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼
// lib/actions/application-actions.ts
export async function applyToJob(workerId: string, jobId: string) {
  const application = await prisma.application.create({ ... });

  // æ–½è¨­ç®¡ç†è€…ã«é€šçŸ¥
  await notificationService.send(job.facility.managerId, {
    type: 'APPLICATION_RECEIVED',
    title: 'æ–°ã—ã„å¿œå‹ŸãŒã‚ã‚Šã¾ã—ãŸ',
    body: `${worker.name}ã•ã‚“ãŒã€Œ${job.title}ã€ã«å¿œå‹Ÿã—ã¾ã—ãŸ`,
  });

  return application;
}
```

**ãƒ†ã‚¹ãƒˆ**:
```typescript
// tests/e2e/feature/notifications.spec.ts
test.describe('é€šçŸ¥æ©Ÿèƒ½', () => {
  test('å¿œå‹Ÿæ™‚ã«æ–½è¨­ç®¡ç†è€…ã«ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹', async ({ page }) => {
    // ãƒ¡ãƒ¼ãƒ«ãƒ¢ãƒƒã‚¯è¨­å®š
    await mockEmailService();

    await loginAsWorker(page);
    await page.goto('/jobs/1');
    await page.click('button:has-text("å¿œå‹Ÿã™ã‚‹")');

    // ãƒ¡ãƒ¼ãƒ«é€ä¿¡ç¢ºèª
    const sentEmails = await getMailMockData();
    expect(sentEmails).toContainEqual(
      expect.objectContaining({
        to: 'facility@example.com',
        subject: expect.stringContaining('æ–°ã—ã„å¿œå‹Ÿ')
      })
    );
  });

  test('é€šçŸ¥è¨­å®šç”»é¢ã§è¨­å®šå¤‰æ›´ãŒã§ãã‚‹', async ({ page }) => {
    await loginAsWorker(page);
    await page.goto('/mypage/settings/notifications');

    await page.uncheck('[name="emailOnMessage"]');
    await page.click('button:has-text("ä¿å­˜")');

    await expect(page.getByText('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ')).toBeVisible();
  });
});
```

---

## Phase 4: UXæ”¹å–„

### ãƒ–ãƒ©ãƒ³ãƒ: `improve/ux-enhancements`

#### å¯¾è±¡é …ç›®

| ID | æ¦‚è¦ | å·¥æ•° |
|----|------|------|
| #35 | æ±‚äººãƒšãƒ¼ã‚¸å·¦å¯„ã‚Šä¿®æ­£ | S |
| #9 | æ±‚äººè©³ç´°ãƒšãƒ¼ã‚¸ä½™ç™½ | S |
| #36 | æ±‚äººãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å·¦å¯„ã‚Š | S |
| #7 | æ™‚çµ¦ã‚³ãƒ³ãƒè¡¨ç¤º | S |
| #65 | æ±‚äºº1åˆ—è¡¨ç¤º | M |
| #62 | ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæµå…¥æ™‚ãƒŠãƒ“ | M |

**ä¸€æ‹¬å¯¾å¿œè¨ˆç”»**:

```typescript
// 1. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä¿®æ­£
// app/jobs/page.tsx
<div className="container mx-auto px-4 max-w-4xl">
  {/* ä¸­å¤®å¯„ã›ã€é©åˆ‡ãªä½™ç™½ */}
</div>

// 2. é‡‘é¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå…±é€šåŒ–
// lib/utils/format.ts
export function formatCurrency(amount: number): string {
  return new Intl.NumberFormat('ja-JP').format(amount);
}

// ä½¿ç”¨ä¾‹
<span>{formatCurrency(job.hourlyWage)}å††/æ™‚</span>
// å‡ºåŠ›: 1,200å††/æ™‚

// 3. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
// components/layout/GlobalNav.tsx
export function GlobalNav() {
  return (
    <nav className="fixed bottom-0 w-full bg-white border-t">
      <Link href="/">TOP</Link>
      <Link href="/jobs">æ±‚äºº</Link>
      <Link href="/mypage">ãƒã‚¤ãƒšãƒ¼ã‚¸</Link>
    </nav>
  );
}
```

**ãƒ†ã‚¹ãƒˆ**:
```typescript
// tests/e2e/improve/ux-improvements.spec.ts
test.describe('UXæ”¹å–„', () => {
  test('æ±‚äººãƒšãƒ¼ã‚¸ãŒä¸­å¤®å¯„ã›ã§è¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    await page.goto('/jobs');
    const container = page.locator('.container');
    const style = await container.evaluate(el =>
      window.getComputedStyle(el)
    );
    expect(style.marginLeft).not.toBe('0px');
    expect(style.marginRight).not.toBe('0px');
  });

  test('æ™‚çµ¦ãŒ3æ¡åŒºåˆ‡ã‚Šã§è¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    await page.goto('/jobs');
    const wage = page.locator('[data-wage]').first();
    const text = await wage.textContent();
    expect(text).toMatch(/\d{1,3}(,\d{3})*å††/);
  });

  test('ãƒ¢ãƒã‚¤ãƒ«ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 });
    await page.goto('/jobs/1');

    await expect(page.locator('[data-testid="global-nav"]')).toBeVisible();
    await page.click('a:has-text("TOP")');
    await expect(page.url()).toBe('/');
  });
});
```

---

## å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Week 1: ç·Šæ€¥å¯¾å¿œ
```bash
git checkout -b fix/critical-bugs
# #72: ã‚½ãƒ¼ãƒˆä¿®æ­£
# #69: æ±‚äººä¸€è¦§ä¿®æ­£
npm run test:e2e -- tests/e2e/fix/
git push origin fix/critical-bugs
# PR â†’ Review â†’ Merge
```

### Week 2: é€šçŸ¥æ©Ÿèƒ½
```bash
git checkout -b feature/notifications
# #71: é€šçŸ¥æ©Ÿèƒ½å®Ÿè£…
npm run test:e2e -- tests/e2e/feature/notifications.spec.ts
git push origin feature/notifications
# PR â†’ Review â†’ Merge
```

### Week 3: é™å®šãƒ»æŒ‡åæ±‚äºº
```bash
git checkout -b feature/limited-jobs
# #64: é™å®šãƒ»æŒ‡åæ±‚äººæ©Ÿèƒ½
npx prisma migrate dev --name add-job-visibility
npm run test:e2e -- tests/e2e/feature/limited-jobs.spec.ts
git push origin feature/limited-jobs
# PR â†’ Review â†’ Merge
```

### Week 4: UXæ”¹å–„
```bash
git checkout -b improve/ux-enhancements
# #35, #9, #36, #7, #65, #62: UXæ”¹å–„ä¸€æ‹¬
npm run test:e2e -- tests/e2e/improve/
git push origin improve/ux-enhancements
# PR â†’ Review â†’ Merge
```

---

## CI/CDè¨­å®š

```yaml
# .github/workflows/e2e-tests.yml
name: E2E Tests

on:
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Install Playwright
        run: npx playwright install --with-deps

      - name: Run E2E tests
        run: npm run test:e2e
        env:
          DATABASE_URL: ${{ secrets.TEST_DATABASE_URL }}

      - uses: actions/upload-artifact@v4
        if: failure()
        with:
          name: playwright-report
          path: playwright-report/
```

---

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### PRä½œæˆæ™‚
- [ ] ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šéã—ã¦ã„ã‚‹
- [ ] TypeScriptã‚¨ãƒ©ãƒ¼ãŒãªã„ (`npm run build`)
- [ ] Lintã‚¨ãƒ©ãƒ¼ãŒãªã„ (`npm run lint`)
- [ ] é–¢é€£ã™ã‚‹ãƒ‡ãƒãƒƒã‚°ã‚·ãƒ¼ãƒˆIDã‚’PRèª¬æ˜ã«è¨˜è¼‰

### ãƒãƒ¼ã‚¸å‰
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
- [ ] E2Eãƒ†ã‚¹ãƒˆé€šé
- [ ] ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§ã®å‹•ä½œç¢ºèª
- [ ] ãƒ‡ãƒãƒƒã‚°ã‚·ãƒ¼ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°æº–å‚™

### ãƒãƒ¼ã‚¸å¾Œ
- [ ] æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª
- [ ] ãƒ‡ãƒãƒƒã‚°ã‚·ãƒ¼ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã€Œå®Œäº†ã€ã«æ›´æ–°
- [ ] é–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆãŒç¶™ç¶šçš„ã«é€šéã™ã‚‹ã“ã¨ã‚’ç¢ºèª
