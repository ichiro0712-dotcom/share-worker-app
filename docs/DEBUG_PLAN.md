# +TASTAS デバッグ計画書

## 概要
大勢でのシステムデバッグ実施計画

---

## デバッグチーム編成

| チーム | 担当領域 | 推奨人数 |
|--------|----------|----------|
| A | ワーカー側機能 | 3-4名 |
| B | 施設管理者側機能 | 2-3名 |
| C | システム管理者機能 | 1-2名 |
| D | クロスファンクション（連携テスト） | 2名 |

---

## デバッグ環境準備

### 事前準備（当日朝まで）
- [ ] 開発サーバー起動確認: `npm run dev`
- [ ] Docker PostgreSQL起動: `docker-compose up -d`
- [ ] テストデータ投入: `npx tsx prisma/seed.ts`
- [ ] 全員のアクセスURL共有: `http://[IPアドレス]:3000`

### テストアカウント
| 役割 | メールアドレス | パスワード |
|------|---------------|-----------|
| ワーカー1 | test1@example.com | password123 |
| ワーカー2 | test2@example.com | password123 |
| 施設管理者 | admin@facility.com | password123 |
| システム管理者 | admin@tastas.jp | （別途共有） |

---

## デバッグスケジュール

| 時間 | 内容 | 担当 |
|------|------|------|
| 09:00-09:30 | 環境確認・チーム分け | 全員 |
| 09:30-11:00 | 【フェーズ1】基本機能テスト | 各チーム |
| 11:00-11:15 | 休憩・中間報告 | 全員 |
| 11:15-12:30 | 【フェーズ2】連携テスト | 全員 |
| 12:30-13:30 | 昼休憩 | - |
| 13:30-15:00 | 【フェーズ3】エッジケース・負荷テスト | 各チーム |
| 15:00-15:30 | バグ報告まとめ・優先度付け | 全員 |
| 15:30-17:00 | 【フェーズ4】重要バグの即時修正 | 開発者 |

---

## フェーズ1: 基本機能テスト

### チームA: ワーカー側機能

#### 1. 認証・登録 (`/login`, `/register/worker`)
- [ ] 新規登録フローが完了できる
  - [ ] メールアドレス入力が機能する
  - [ ] パスワード入力（確認含む）が機能する
  - [ ] 必須項目の入力検証が動作する
  - [ ] 登録完了後に自動ログインされる
- [ ] ログイン/ログアウトが正常動作
  - [ ] メール/パスワードでログインできる
  - [ ] 間違ったパスワードでエラー表示
  - [ ] ログアウト後にログインページへリダイレクト
- [ ] パスワードリセットが機能する (`/password-reset`)
  - [ ] メールアドレス入力でリセットメール送信
  - [ ] リセットリンクからパスワード再設定
- [ ] セッションが適切に維持される
  - [ ] ページ遷移後もログイン状態維持
  - [ ] ブラウザ再起動後もログイン維持

#### 2. 求人検索・閲覧 (`/`, `/jobs/[id]`)

##### 2-1. トップページ・求人一覧
- [ ] 求人一覧が表示される
- [ ] 各求人カードに以下が表示される
  - [ ] 求人タイトル
  - [ ] 時給・日給
  - [ ] 勤務日程（単発/複数）
  - [ ] 勤務時間
  - [ ] 必要資格
  - [ ] 施設名・所在地

##### 2-2. 求人種別ごとの表示
- [ ] **単発求人**が正しく表示される
  - [ ] 日付が1日のみ表示
- [ ] **複数日程求人**が正しく表示される
  - [ ] 「全N日」のラベルが表示される
  - [ ] 日程範囲が表示される
- [ ] **面接あり求人**に「面接あり」「審査あり」ラベルが表示される
- [ ] **勤務日条件付き求人**に条件が表示される（「週N回以上勤務」等）

##### 2-3. 検索・フィルタ
- [ ] 地域フィルタが機能する
- [ ] 資格フィルタが機能する
- [ ] 日付フィルタが機能する
- [ ] フリーワード検索が機能する

##### 2-4. 求人詳細ページ (`/jobs/[id]`)
- [ ] 求人情報が正しく表示される
  - [ ] タイトル・施設名
  - [ ] 時給・日給・交通費
  - [ ] 勤務時間・休憩時間
  - [ ] 仕事内容
  - [ ] 必要資格・経験
  - [ ] 服装・持ち物
  - [ ] 施設担当者メッセージ
- [ ] 画像カルーセルが動作する
- [ ] 勤務日カレンダーが正しく表示される
  - [ ] 単発求人: 1日のみ表示
  - [ ] 複数日程: カレンダーで複数日選択可能
- [ ] **面接あり求人**の場合
  - [ ] 面接についての説明が表示される
  - [ ] 「面接後にマッチング判定」の旨が明記される
- [ ] **勤務日条件付き求人**の場合
  - [ ] 条件（週N回以上等）が表示される
- [ ] こだわり条件タグが表示される
  - [ ] 未経験OK / ブランクOK / 髪型自由 / ネイルOK / 制服貸与 / 車通勤OK / 食事サポート

#### 3. 応募機能 (`/jobs/[id]`, `/application-complete`)

##### 3-1. 基本応募
- [ ] 求人詳細から応募ボタンが表示される
- [ ] ログインしていない場合はログインページへ誘導
- [ ] 応募確認画面が表示される
- [ ] 応募完了後に完了ページへ遷移

##### 3-2. 求人種別ごとの応募
- [ ] **単発求人**に応募できる
- [ ] **複数日程求人**
  - [ ] 1日だけ選択して応募できる
  - [ ] 複数日選択して応募できる
  - [ ] 0日選択では応募できない（バリデーション）
- [ ] **面接あり求人**に応募できる
  - [ ] 応募時に「面接後にマッチング判定」等の説明が表示される
- [ ] **勤務日条件付き求人**
  - [ ] 条件を満たす日数で応募できる
  - [ ] 条件未満の日数では応募できない（エラー表示）

##### 3-3. 応募制御
- [ ] 応募済みの求人に再応募できない
- [ ] 応募後に求人カード/詳細で「応募済み」表示になる
- [ ] 募集枠が埋まった求人に応募できない
- [ ] **エラー時にバナーが表示される**

#### 4. マイページ (`/mypage`)

##### 4-1. プロフィール (`/mypage/profile`)
- [ ] プロフィール情報が表示される
  - [ ] 氏名（姓・名）
  - [ ] プロフィール画像
  - [ ] 生年月日
  - [ ] 住所
  - [ ] 電話番号
  - [ ] 自己紹介
- [ ] プロフィール編集ができる
  - [ ] 各項目を変更して保存できる
  - [ ] 必須項目の検証が動作する
- [ ] プロフィール画像のアップロード/変更ができる
  - [ ] 画像を選択してアップロード
  - [ ] プレビューが表示される
  - [ ] 保存後に反映される

##### 4-2. 資格情報
- [ ] 資格の登録ができる
  - [ ] 資格を選択して追加
  - [ ] 資格を削除
- [ ] 資格証明書のアップロードができる
  - [ ] 画像をアップロード
  - [ ] アップロードした画像が表示される

##### 4-3. 応募履歴 (`/mypage/applications` or `/my-jobs`)
- [ ] 応募した求人一覧が表示される
- [ ] ステータス別にタブ/フィルタで表示
  - [ ] 審査中（APPLIED）
  - [ ] 仕事の予定（SCHEDULED）
  - [ ] 勤務中（WORKING）
  - [ ] 完了（COMPLETED_RATED）
  - [ ] キャンセル（CANCELLED）

#### 5. レビュー機能

##### 5-1. レビュー投稿 (`/mypage/reviews`, `/mypage/reviews/[applicationId]`)
- [ ] 勤務完了後の求人がレビュー投稿待ち一覧に表示される
- [ ] レビュー投稿画面でレビューを入力できる
  - [ ] 評価（星1-5）を選択できる
  - [ ] 良かった点を入力できる
  - [ ] 改善点を入力できる
- [ ] 投稿したレビューが保存される
- [ ] 投稿済みレビューが「投稿済み」一覧に表示される

##### 5-2. 受けた評価 (`/mypage/reviews/received`)
- [ ] 施設から受けた評価一覧が表示される
- [ ] 各レビューに以下が表示される
  - [ ] 施設名
  - [ ] 求人タイトル
  - [ ] 勤務日
  - [ ] 総合評価（星）
  - [ ] 5項目評価（勤怠・スキル・遂行力・コミュ力・姿勢）
  - [ ] コメント

#### 6. メッセージ (`/messages`)
- [ ] メッセージ一覧が表示される
  - [ ] 施設ごとのスレッド一覧
  - [ ] 最新メッセージのプレビュー
  - [ ] 未読件数
- [ ] 施設とのメッセージ送受信ができる
  - [ ] テキストメッセージ送信
  - [ ] メッセージ受信・表示
- [ ] 未読バッジが正しく表示される
  - [ ] 未読時にバッジ表示
  - [ ] 既読後にバッジ非表示

#### 7. 勤務管理 (`/my-jobs`, `/my-jobs/[id]`)

##### 7-1. 勤務予定
- [ ] 予定している勤務が表示される
- [ ] 各勤務に以下が表示される
  - [ ] 求人タイトル
  - [ ] 施設名
  - [ ] 勤務日時
  - [ ] 報酬

##### 7-2. 勤務詳細 (`/my-jobs/[id]`)
- [ ] 勤務詳細が表示される
- [ ] 労働条件通知書が確認できる (`/my-jobs/[id]/labor-document`)

##### 7-3. キャンセル
- [ ] **マッチング後にキャンセルできる**
  - [ ] キャンセルボタンが表示される
  - [ ] キャンセル確認モーダルが表示される
  - [ ] キャンセル実行後にステータスが「キャンセル」になる
- [ ] **キャンセル後にキャンセル率が更新される**
  - [ ] マイページでキャンセル率が確認できる
  - [ ] 直前キャンセル率も別途集計される

##### 7-4. 施設からのキャンセル
- [ ] **施設からキャンセルされた場合に通知が届く**
- [ ] ステータスが「キャンセル」になる
- [ ] **ワーカーのキャンセル率には反映されない**

#### 8. お気に入り・ブックマーク (`/favorites`, `/bookmarks`)
- [ ] 求人をお気に入り/ブックマークできる
- [ ] お気に入り一覧が表示される
- [ ] お気に入り解除ができる

#### 9. 施設詳細 (`/facilities/[id]`)
- [ ] 施設情報が表示される
- [ ] 施設のレビュー・評価が表示される

#### 10. 通知 (`/notifications`)
- [ ] 通知一覧が表示される
- [ ] 各種通知が届く
  - [ ] マッチング承認通知
  - [ ] 応募却下通知
  - [ ] キャンセル通知
  - [ ] メッセージ通知

---

### チームB: 施設管理者側機能

#### 1. 認証 (`/admin/login`)
- [ ] 施設管理者ログインができる
- [ ] ログアウトが正常動作

#### 2. ダッシュボード (`/admin`)
- [ ] ダッシュボードが表示される
- [ ] 各種統計サマリーが表示される

#### 3. 求人管理 (`/admin/jobs`)

##### 3-1. 求人一覧
- [ ] 求人一覧が表示される
- [ ] 各求人カードに以下が表示される
  - [ ] ステータスバッジ（公開中/停止中）
  - [ ] **審査ありバッジ**（面接あり求人の場合）
  - [ ] 求人タイトル
  - [ ] 応募状況（応募数/マッチング数/募集数）
  - [ ] 時給
  - [ ] 日時・勤務日数
  - [ ] 業務内容
  - [ ] 必要資格
  - [ ] **週N回以上勤務バッジ**（条件付き求人の場合）
- [ ] フィルタが機能する
  - [ ] ステータス（公開中/停止中）
  - [ ] 期間（年月範囲指定）
  - [ ] テンプレート
  - [ ] フリーワード検索
- [ ] 一括操作が機能する
  - [ ] 複数選択
  - [ ] 一括公開
  - [ ] 一括停止
  - [ ] 一括削除

##### 3-2. 求人作成 (`/admin/jobs/new`)
- [ ] 求人作成フォームが表示される
- [ ] **単発求人（1日のみ）を作成できる**
  - [ ] カレンダーで1日を選択
- [ ] **複数日程求人を作成できる**
  - [ ] カレンダーで複数日を選択
  - [ ] 各日の募集人数を設定
- [ ] **面接あり求人を作成できる**
  - [ ] 「審査あり」チェックボックスをON
  - [ ] 保存後に「審査あり」バッジが表示される
- [ ] **勤務日条件付き求人を作成できる**
  - [ ] 「週N回以上勤務」条件を選択
  - [ ] 保存後に条件バッジが表示される
- [ ] フォーム項目の入力
  - [ ] テンプレート選択
  - [ ] 求人タイトル
  - [ ] 勤務時間（開始・終了・休憩）
  - [ ] 時給・交通費
  - [ ] 業務内容（複数選択）
  - [ ] 必要資格（複数選択）
  - [ ] 仕事概要
  - [ ] 服装・持ち物
  - [ ] こだわり条件（7項目）
  - [ ] 画像アップロード
  - [ ] 添付ファイル
- [ ] プレビュー表示が機能する
- [ ] 確認モーダルが表示される
- [ ] 保存後に一覧に表示される

##### 3-3. 求人編集 (`/admin/jobs/[id]/edit`)
- [ ] 既存求人の編集ができる
- [ ] **単発求人を編集できる**
- [ ] **複数日程求人を編集できる**
  - [ ] 勤務日の追加
  - [ ] 勤務日の削除（応募がない日のみ）
- [ ] **面接あり設定を変更できる**
- [ ] **勤務日条件を変更できる**
- [ ] 変更が保存される

##### 3-4. 求人公開/停止
- [ ] 求人を公開できる
- [ ] 求人を停止できる

##### 3-5. 求人テンプレート (`/admin/jobs/templates`)
- [ ] テンプレート一覧が表示される
- [ ] 新規テンプレート作成ができる
- [ ] テンプレート編集ができる
- [ ] テンプレートから求人作成ができる

#### 4. 応募管理 (`/admin/applications`)

##### 4-1. 応募一覧
- [ ] 応募一覧が表示される
- [ ] 求人ベース表示/ワーカーベース表示の切り替え
- [ ] **単発求人の応募が表示される**
- [ ] **複数日程求人の応募が日ごとに表示される**
- [ ] **面接あり求人の応募が表示される**
- [ ] **未確認応募バッジが勤務日ごとに表示される**

##### 4-2. 応募承認（マッチング）
- [ ] 応募を承認（マッチング）できる
  - [ ] **単発求人の応募を承認できる**
  - [ ] **複数日程求人の応募を日ごとに承認できる**
  - [ ] **面接あり求人の応募を承認できる**
- [ ] 承認後にワーカーに通知が届く
- [ ] 募集枠がデクリメントされる

##### 4-3. 応募却下
- [ ] 応募を却下できる
  - [ ] **単発求人の応募を却下できる**
  - [ ] **複数日程求人の応募を日ごとに却下できる**
  - [ ] **面接あり求人の応募を却下できる**
- [ ] **却下後にワーカーに通知が届く**
- [ ] 却下理由が記録される

##### 4-4. 月間シフトビュー
- [ ] 月間カレンダーが表示される
- [ ] マッチング済みシフトがカレンダーに表示される

#### 5. シフト管理 (`/admin/shifts`)
- [ ] 週表示/月表示の切り替えができる
- [ ] マッチング済みシフト一覧が表示される
- [ ] シフト詳細モーダルが表示される
  - [ ] ワーカー情報
  - [ ] 勤務日時
  - [ ] 時給・交通費
  - [ ] 求人リンク
- [ ] **シフトをキャンセルできる**
  - [ ] キャンセルボタンが表示される
  - [ ] キャンセル確認モーダルが表示される
  - [ ] **キャンセル実行後にワーカーに通知が届く**
  - [ ] **施設側キャンセルはワーカーのキャンセル率に反映されない**
- [ ] メッセージボタンからメッセージ画面へ遷移

#### 6. ワーカー管理 (`/admin/workers`)

##### 6-1. ワーカー一覧
- [ ] マッチしたワーカー一覧が表示される
- [ ] 各ワーカーに以下が表示される
  - [ ] プロフィール画像
  - [ ] 氏名
  - [ ] 住所（都道府県・市区町村）
  - [ ] 資格バッジ
  - [ ] 経験分野
  - [ ] **評価（平均・件数）**
  - [ ] **勤務回数（自社/他社）**
  - [ ] **キャンセル率（通常/直前）**
  - [ ] お気に入り/ブロック状態
  - [ ] ステータスバッジ（未就労/就労中/就労済/キャンセル）
- [ ] フィルタが機能する
  - [ ] フリーワード検索
  - [ ] 職種（介護/看護/薬剤師）
  - [ ] ステータス
- [ ] 並び替えが機能する
  - [ ] 勤務回数順
  - [ ] 最終勤務日順

##### 6-2. ワーカー詳細 (`/admin/workers/[id]`)
- [ ] **基本情報が表示される**
  - [ ] プロフィール画像
  - [ ] 氏名
  - [ ] 住所
  - [ ] 電話番号
  - [ ] 生年月日
  - [ ] 自己紹介
- [ ] **資格情報が表示される**
- [ ] **統計情報が表示される**
  - [ ] 評価（平均・件数）
  - [ ] **キャンセル率**
  - [ ] **直前キャンセル率**
  - [ ] 勤務回数
- [ ] **過去の勤務履歴が表示される**
- [ ] **今後の勤務予定が表示される**
- [ ] **レビュー投稿ボタンが表示される**

##### 6-3. ワーカー詳細サブページ
- [ ] **資格証明書が確認できる** (`/admin/workers/[id]/certificates`)
- [ ] **緊急連絡先が確認できる** (`/admin/workers/[id]/emergency-contacts`)
- [ ] **勤務予定が確認できる** (`/admin/workers/[id]/schedules`)
- [ ] **労働条件通知書一覧** (`/admin/workers/[id]/labor-documents`)

##### 6-4. ワーカーアクション
- [ ] ワーカーをお気に入り登録できる
- [ ] お気に入り解除できる
- [ ] ワーカーをブロックできる
- [ ] ブロック解除できる

#### 7. レビュー機能

##### 7-1. ワーカーへのレビュー投稿 (`/admin/workers/[id]/review`)
- [ ] レビュー投稿画面が表示される
- [ ] **評価（星1-5）を入力できる**
- [ ] **良かった点を入力できる**
- [ ] **改善点を入力できる**
- [ ] 投稿後にワーカー詳細に表示される

##### 7-2. 受けたレビュー一覧 (`/admin/reviews`)
- [ ] ワーカーから受けたレビュー一覧が表示される
- [ ] 評価サマリー（平均評価・分布）が表示される
- [ ] ソート（新着順/評価順）が機能する
- [ ] AI分析機能（ダミー）が動作する

##### 7-3. ワーカーレビュー一覧 (`/admin/worker-reviews`)
- [ ] 投稿したワーカーレビュー一覧が表示される

#### 8. メッセージ (`/admin/messages`)
- [ ] ワーカー別のメッセージ一覧が表示される
- [ ] ワーカーにメッセージを送信できる
- [ ] 未読件数が正しく表示される

#### 9. 通知 (`/admin/notifications`)
- [ ] 通知一覧が表示される
- [ ] 各種通知が届く

#### 10. 施設設定 (`/admin/facility`)
- [ ] 施設情報が表示される
- [ ] 施設情報を編集できる
- [ ] 施設画像をアップロードできる
- [ ] 担当者情報を編集できる

#### 11. その他ページ
- [ ] FAQ (`/admin/faq`) - FAQが表示される
- [ ] 利用規約 (`/admin/terms`) - 利用規約が表示される
- [ ] プライバシーポリシー (`/admin/privacy`) - ポリシーが表示される

---

### チームC: システム管理者機能

#### 1. 認証 (`/system-admin/login`)
- [ ] ログイン成功
- [ ] ログアウト成功
- [ ] セッション維持（8時間）
- [ ] 不正認証情報でエラー表示

#### 2. ダッシュボード (`/system-admin`)
- [ ] 統計サマリーが表示される
- [ ] アラートが表示される
- [ ] 最近のアクティビティ

#### 3. 施設管理 (`/system-admin/facilities`)
- [ ] 施設一覧が表示される
- [ ] 施設検索・フィルタが機能する
- [ ] 施設詳細が確認できる
- [ ] 施設承認ができる
- [ ] 施設却下ができる
- [ ] 新規施設登録 (`/system-admin/facilities/new`)

#### 4. ワーカー管理 (`/system-admin/workers`)
- [ ] ワーカー一覧が表示される
- [ ] ワーカー検索・フィルタが機能する
- [ ] ワーカー詳細が確認できる (`/system-admin/workers/[id]`)

#### 5. 求人管理 (`/system-admin/jobs`)
- [ ] 全求人一覧が表示される
- [ ] 求人検索・フィルタが機能する

#### 6. アラート管理 (`/system-admin/alerts`)
- [ ] アラート一覧が表示される
- [ ] アラート対応が記録できる

#### 7. コンテンツ管理 (`/system-admin/content`)

##### 7-1. 通知テンプレート (`/system-admin/content/templates`)
- [ ] テンプレート一覧が表示される
- [ ] テンプレート編集ができる

##### 7-2. 通知設定 (`/system-admin/content/notifications`)
- [ ] 通知ON/OFF設定ができる

##### 7-3. FAQ (`/system-admin/content/faq`)
- [ ] FAQ一覧が表示される
- [ ] FAQ追加・編集・削除ができる

##### 7-4. 利用規約・プライバシーポリシー (`/system-admin/content/legal`)
- [ ] 利用規約の編集ができる
- [ ] プライバシーポリシーの編集ができる

##### 7-5. 使い方ガイド (`/system-admin/content/user-guide`)
- [ ] ガイドの編集ができる

##### 7-6. 労働条件通知書テンプレート (`/system-admin/content/labor-template`)
- [ ] テンプレートの編集ができる

#### 8. お知らせ管理 (`/system-admin/announcements`)
- [ ] お知らせ一覧が表示される
- [ ] 新規お知らせ作成 (`/system-admin/announcements/create`)
- [ ] お知らせ編集 (`/system-admin/announcements/[id]`)
- [ ] お知らせ削除

#### 9. 管理者設定 (`/system-admin/settings/admins`)
- [ ] 管理者一覧が表示される
- [ ] 管理者追加・編集ができる

#### 10. アナリティクス (`/system-admin/analytics`)

##### 10-1. 概要タブ
- [ ] KPIサマリーが表示される
  - [ ] 総ワーカー数
  - [ ] 総施設数
  - [ ] 総求人数
  - [ ] 応募数・マッチング数
  - [ ] マッチング率
- [ ] 期間フィルタ（日/週/月/年）が機能する
- [ ] グラフが表示される
  - [ ] ユーザー推移
  - [ ] 求人・応募推移
  - [ ] マッチング率推移

##### 10-2. 地域別分析 (`/system-admin/analytics/regions`)
- [ ] 地域別統計が表示される
- [ ] 地域ごとのワーカー数・施設数・求人数

##### 10-3. エクスポート (`/system-admin/analytics/export`)
- [ ] CSVエクスポートが機能する
- [ ] 期間指定ができる

##### 10-4. AI分析 (`/system-admin/analytics/ai`)
- [ ] AI分析機能が動作する

##### 10-5. 数値検証
- [ ] 総ワーカー数 = ワーカー一覧件数
- [ ] 総施設数 = 施設一覧件数
- [ ] 総求人数 = 求人一覧件数
- [ ] 応募数・マッチング数が実データと整合
- [ ] マッチング率の計算が正しい
- [ ] 前期比の計算が正しい

#### 11. 開発ポータル (`/system-admin/dev-portal`)
- [ ] サンプル画像一覧 (`/system-admin/dev-portal/sample-images`)
- [ ] 通知ログ (`/system-admin/dev-portal/notification-logs`)

---

## フェーズ2: 連携テスト（クロスファンクション）

### シナリオ1: 応募〜マッチング〜勤務完了フロー
```
1. [ワーカー] 求人を検索して応募
2. [施設管理者] 応募を確認してマッチング承認
3. [ワーカー] マッチング通知を確認
4. [施設管理者] ワーカーにメッセージ送信
5. [ワーカー] メッセージを確認して返信
6. [施設管理者] 勤務完了処理
7. [ワーカー] 施設にレビュー投稿
8. [施設管理者] ワーカーにレビュー投稿
9. [ワーカー] 受けた評価を確認
```

### シナリオ2: キャンセルフロー（ワーカー起点）
```
1. [ワーカー] 求人に応募
2. [施設管理者] マッチング承認
3. [ワーカー] マッチング後にキャンセル
4. [施設管理者] キャンセル通知を確認
5. [システム] ワーカーのキャンセル率が更新される
6. [施設管理者] ワーカー詳細でキャンセル率を確認
```

### シナリオ2-2: キャンセルフロー（施設起点）
```
1. [ワーカー] 求人に応募
2. [施設管理者] マッチング承認
3. [施設管理者] シフト管理画面からキャンセル
4. [ワーカー] キャンセル通知を確認
5. [システム] ワーカーのキャンセル率は更新されない（施設起点のため）
6. [ワーカー] マイページでキャンセル率を確認（変化なし）
```

### シナリオ3: 複数ワーカー同時応募
```
1. [ワーカーA, B, C] 同じ求人に同時応募
2. [施設管理者] 募集人数分だけマッチング
3. [システム] 募集枠が正しく更新される
4. [ワーカー] 枠が埋まった求人に応募できない
```

### シナリオ4: エラーハンドリング
```
1. [ワーカー] ネットワークエラー状態で応募
2. [システム] エラーバナーが表示される
3. [システム管理者] エラーメッセージ設定でバナーをOFF
4. [ワーカー] 同じエラーでバナーが表示されない
```

### シナリオ5: 面接あり求人フロー（承認）
```
1. [施設管理者] 面接あり求人を作成（「審査あり」ON）
2. [ワーカー] 求人一覧で「面接あり」ラベル確認
3. [ワーカー] 詳細で面接説明を確認して応募
4. [施設管理者] 応募確認（面接あり求人として表示）
5. [施設管理者] マッチング承認
6. [ワーカー] マッチング通知を確認
```

### シナリオ5-2: 面接あり求人フロー（却下）
```
1. [施設管理者] 面接あり求人を作成
2. [ワーカー] 応募
3. [施設管理者] 応募を却下
4. [ワーカー] 却下通知を確認
5. [ワーカー] 応募履歴で「却下」ステータス表示
```

### シナリオ6: 複数日程求人の部分マッチング
```
1. [施設管理者] 5日間の求人を作成
2. [ワーカーA] 3日分を選択して応募
3. [施設管理者] ワーカーAの3日分をマッチング
4. [ワーカーB] 残り2日に応募
5. [施設管理者] ワーカーBの2日分をマッチング
6. [シフト管理] 両ワーカーのシフトが正しく表示される
```

### シナリオ7: 勤務日条件付き求人
```
1. [施設管理者] 「週2回以上勤務」条件の求人を作成
2. [ワーカー] 1日だけ選択して応募試行 → エラー
3. [ワーカー] 2日以上選択して応募 → 成功
4. [施設管理者] 応募を確認してマッチング
```

### シナリオ8: レビュー相互投稿
```
1. [勤務完了後]
2. [ワーカー] 施設にレビュー投稿（評価・コメント）
3. [施設管理者] 自施設のレビュー一覧で確認
4. [施設管理者] ワーカーにレビュー投稿（評価・コメント）
5. [ワーカー] 受けた評価画面で確認
6. [施設管理者] ワーカー詳細でレビュー履歴確認
```

---

## フェーズ3: エッジケース・負荷テスト

### エッジケース

#### 入力値テスト
- [ ] 空文字での送信
- [ ] 最大文字数での入力
- [ ] 特殊文字（絵文字、HTML、SQLインジェクション風）
- [ ] 日本語・英語混在

#### 日時関連
- [ ] 過去の日付での求人作成
- [ ] 深夜0時をまたぐ勤務時間
- [ ] タイムゾーン境界（日本時間）

#### 権限関連
- [ ] ログアウト状態でのアクセス
- [ ] 他人のデータへのアクセス試行
- [ ] URLの直接入力でのアクセス

### 負荷テスト（複数人で同時操作）
- [ ] 同時ログイン（10人以上）
- [ ] 同時検索（10人以上）
- [ ] 同一求人への同時応募（5人以上）
- [ ] 同時メッセージ送信

---

## バグ報告フォーマット

### 報告テンプレート

```
【バグID】BUG-YYYYMMDD-001
【報告者】
【発見日時】
【重要度】Critical / High / Medium / Low
【カテゴリ】認証 / 求人 / 応募 / メッセージ / UI / その他
【再現手順】
1.
2.
3.
【期待される動作】
【実際の動作】
【スクリーンショット】
【ブラウザ/OS】
【備考】
```

### 重要度の定義

| 重要度 | 定義 | 例 |
|--------|------|-----|
| Critical | サービス停止レベル | ログインできない、データ消失 |
| High | 主要機能が使えない | 応募できない、マッチングできない |
| Medium | 機能は使えるが問題あり | 表示崩れ、エラーメッセージ不適切 |
| Low | 軽微な問題 | 誤字、色の違和感 |

---

## チェックリスト一覧（印刷用）

### ワーカー機能チェックリスト

```
【認証】
□ 新規登録完了
□ ログイン成功
□ ログアウト成功
□ パスワードリセット（メール送信→再設定）

【求人検索・閲覧】
□ 求人一覧表示
□ 検索フィルタ動作（地域・資格・日付）
□ 求人詳細表示
□ 勤務日カレンダー表示

【求人種別ごとの表示確認】
□ 単発求人（1日のみ）が正しく表示される
□ 複数日程求人のカレンダー表示が正しい
□ 面接あり求人に「面接あり」「審査あり」ラベルが表示される
□ 勤務日条件付き求人に条件が表示される（例: 週2回以上）
□ こだわり条件タグが表示される

【応募機能】
□ 単発求人への応募完了
□ 複数日程求人で複数日選択して応募
□ 面接あり求人への応募（説明表示確認）
□ 勤務日条件付き求人への応募（条件を満たす/満たさない場合）
□ 応募済み求人に再応募できない
□ 応募後「応募済み」表示になる
□ 応募エラー時バナー表示

【マイページ】
□ プロフィール表示
□ プロフィール編集保存
□ プロフィール画像アップロード
□ 資格情報登録
□ 資格証明書アップロード
□ 応募履歴表示（ステータス別タブ）

【レビュー機能】
□ レビュー投稿待ち一覧表示
□ レビュー投稿（評価・コメント）
□ 投稿済みレビュー一覧表示
□ 受けた評価一覧表示（5項目評価含む）

【メッセージ】
□ メッセージ一覧表示
□ メッセージ送信
□ メッセージ受信
□ 未読バッジ表示

【勤務管理】
□ 勤務予定表示（マイ求人）
□ 勤務詳細表示
□ 労働条件通知書表示
□ キャンセル実行
□ キャンセル後キャンセル率更新

【通知】
□ 通知一覧表示
□ マッチング通知受信
□ キャンセル通知受信
□ メッセージ通知受信

テスト者: ____________
日時: ____________
```

### 施設管理者機能チェックリスト

```
【認証】
□ ログイン成功
□ ログアウト成功

【求人作成 - 基本パターン】
□ 単発求人（1日のみ）作成
□ 複数日程求人作成（カレンダーで複数日選択）
□ 求人プレビュー表示
□ 確認モーダル表示

【求人作成 - オプション設定】
□ 面接あり求人の作成
  □ 「審査あり」チェックボックスON
  □ 保存後に「審査あり」ラベル表示確認
□ 勤務日条件の設定
  □ 「週2回以上勤務できる人を募集」など選択
  □ 保存後に条件バッジが表示される確認
□ こだわり条件（7項目）の設定
□ 画像アップロード
□ 添付ファイルアップロード

【求人管理】
□ 求人一覧表示（ステータス・バッジ確認）
□ 求人編集
□ 求人公開/停止切り替え
□ 勤務日の追加/削除
□ 求人テンプレート保存・使用
□ 求人一覧のフィルタ（ステータス・日付・テンプレート）
□ 一括操作（選択・公開・停止・削除）

【応募管理】
□ 応募一覧表示
□ 求人ベース/ワーカーベース切り替え
□ 応募詳細表示（ワーカー情報）
□ マッチング承認
□ 応募却下
□ 未確認応募バッジ表示（勤務日ごと）

【シフト管理】
□ 週表示/月表示切り替え
□ マッチング済みシフト表示
□ シフト詳細モーダル
□ シフトキャンセル実行
□ キャンセル後ワーカー通知確認

【ワーカー管理】
□ マッチしたワーカー一覧表示
□ ワーカー検索・フィルタ
□ ワーカー詳細表示
  □ 基本情報
  □ 資格情報
  □ 評価・キャンセル率
  □ 勤務履歴
  □ 勤務予定
□ 資格証明書確認ページ
□ 緊急連絡先確認ページ
□ 勤務予定確認ページ
□ 労働条件通知書一覧
□ ワーカーお気に入り登録/解除
□ ワーカーブロック/解除

【レビュー機能】
□ ワーカーへのレビュー投稿
□ 受けたレビュー一覧表示
□ 投稿したレビュー一覧表示

【メッセージ】
□ ワーカー別メッセージ一覧
□ メッセージ送信
□ 未読件数表示

【施設設定】
□ 施設情報表示
□ 施設情報編集
□ 施設画像アップロード

テスト者: ____________
日時: ____________
```

### システム管理者機能チェックリスト

```
【認証】
□ ログイン成功
□ ログアウト成功
□ セッション維持（8時間）

【ダッシュボード】
□ 統計サマリー表示
□ アラート表示
□ 最近のアクティビティ

【施設管理】
□ 施設一覧表示
□ 施設検索・フィルタ
□ 施設詳細表示
□ 施設承認
□ 施設却下
□ 新規施設登録

【ワーカー管理】
□ ワーカー一覧表示
□ ワーカー検索・フィルタ
□ ワーカー詳細表示

【求人管理】
□ 全求人一覧表示
□ 求人検索・フィルタ

【コンテンツ管理】
□ 通知テンプレート一覧・編集
□ 通知ON/OFF設定
□ FAQ一覧・編集
□ 利用規約・プライバシーポリシー編集
□ 使い方ガイド編集
□ 労働条件通知書テンプレート

【お知らせ管理】
□ お知らせ一覧
□ 新規お知らせ作成
□ お知らせ編集・削除

【管理者設定】
□ 管理者一覧
□ 管理者追加・編集

【アナリティクス】
□ ダッシュボード概要
□ ユーザー推移グラフ
□ 求人・応募統計
□ マッチング率推移
□ 期間フィルタ動作（日/週/月/年）
□ 地域別分析表示
□ データエクスポート
□ AI分析機能

【アナリティクス数値検証】
□ 総ワーカー数がワーカー一覧件数と一致
□ 総施設数が施設一覧件数と一致
□ 総求人数が求人一覧件数と一致
□ 応募数・マッチング数が実データと整合
□ マッチング率の計算が正しい
□ 前期比の計算が正しい

【開発ポータル】
□ サンプル画像一覧
□ 通知ログ表示

テスト者: ____________
日時: ____________
```

### 求人種別別テストチェックリスト

```
【単発求人（1日のみ）】
□ [施設] 作成できる
□ [施設] 編集できる
□ [施設] 一覧で日付が1日表示
□ [ワーカー] 一覧で正しく表示される
□ [ワーカー] 詳細で日付が1日のみ表示
□ [ワーカー] 応募できる
□ [施設] 応募を承認できる
□ [施設] 応募を却下できる

【複数日程求人】
□ [施設] 複数日を選択して作成できる
□ [施設] カレンダーで日付追加/削除できる
□ [施設] 一覧で「全N日」ラベル表示
□ [ワーカー] 一覧で「複数日程」表示
□ [ワーカー] 詳細でカレンダー表示
□ [ワーカー] 複数日を選択して応募できる
□ [ワーカー] 1日だけ選択して応募できる
□ [施設] 日ごとに応募確認できる
□ [施設] 日ごとにマッチング/却下できる

【勤務日条件付き求人】
□ [施設] 条件（週2回以上等）を設定して作成
□ [施設] 条件を変更できる
□ [施設] 一覧で条件バッジが表示される
□ [ワーカー] 一覧で条件が表示される
□ [ワーカー] 詳細で条件が表示される
□ [ワーカー] 条件未満の日数では応募できない（エラー表示）
□ [ワーカー] 条件以上の日数で応募できる

【面接あり求人】
□ [施設] 「審査あり」で作成できる
□ [施設] 一覧で「審査あり」バッジ表示
□ [ワーカー] 一覧で「面接あり」ラベル表示
□ [ワーカー] 詳細で面接について説明表示
□ [ワーカー] 応募時の注意表示
□ [施設] 応募確認（面接あり求人として識別）
□ [施設] マッチング承認
□ [施設] 応募却下

テスト者: ____________
日時: ____________
```

### 連携テストチェックリスト

```
【シナリオ1: 応募〜マッチング〜勤務完了フロー】
□ [ワーカー] 求人を検索
□ [ワーカー] 求人に応募
□ [施設] 応募通知を確認
□ [施設] 応募をマッチング承認
□ [ワーカー] マッチング通知を確認
□ [施設] ワーカーにメッセージ送信
□ [ワーカー] メッセージを確認・返信
□ [施設] 勤務完了処理
□ [ワーカー] 施設にレビュー投稿
□ [施設] ワーカーにレビュー投稿
□ [ワーカー] 受けた評価を確認

【シナリオ2: キャンセルフロー（ワーカー起点）】
□ [ワーカー] 求人に応募
□ [施設] マッチング承認
□ [ワーカー] マッチング後にキャンセル
□ [施設] キャンセル通知を確認
□ [システム] ワーカーのキャンセル率が更新される
□ [施設] ワーカー詳細でキャンセル率を確認

【シナリオ2-2: キャンセルフロー（施設起点）】
□ [ワーカー] 求人に応募
□ [施設] マッチング承認
□ [施設] シフトをキャンセル
□ [ワーカー] キャンセル通知を確認
□ [システム] ワーカーのキャンセル率は更新されない
□ [ワーカー] マイページでキャンセル率確認（変化なし）

【シナリオ3: 複数ワーカー同時応募】
□ [ワーカーA,B,C] 同じ求人に応募
□ [施設] 募集人数分だけマッチング
□ [システム] 募集枠が正しく更新
□ [ワーカー] 枠が埋まった求人に応募不可

【シナリオ5: 面接あり求人フロー（承認）】
□ [施設] 面接あり求人を作成
□ [ワーカー] 一覧で「面接あり」ラベル確認
□ [ワーカー] 詳細で説明確認・応募
□ [施設] 応募確認
□ [施設] マッチング承認
□ [ワーカー] マッチング通知を確認

【シナリオ5-2: 面接あり求人フロー（却下）】
□ [施設] 面接あり求人を作成
□ [ワーカー] 応募
□ [施設] 応募を却下
□ [ワーカー] 却下通知を確認
□ [ワーカー] 応募履歴で「却下」ステータス表示

【シナリオ6: 複数日程求人の部分マッチング】
□ [施設] 5日間の求人を作成
□ [ワーカーA] 3日分を選択して応募
□ [施設] 3日分をマッチング
□ [ワーカーB] 残り2日に応募
□ [施設] 残り2日をマッチング

【シナリオ7: 勤務日条件付き求人】
□ [施設] 「週2回以上」条件の求人を作成
□ [ワーカー] 1日だけ選択して応募 → エラー
□ [ワーカー] 2日以上選択して応募 → 成功
□ [施設] マッチング

【シナリオ8: レビュー相互投稿】
□ [勤務完了後]
□ [ワーカー] 施設にレビュー投稿
□ [施設] 自施設レビュー一覧で確認
□ [施設] ワーカーにレビュー投稿
□ [ワーカー] 受けた評価で確認
□ [施設] ワーカー詳細でレビュー確認

テスト者: ____________
日時: ____________
```

### アナリティクス検証チェックリスト

```
【数値の整合性確認】
□ 総ワーカー数 = ワーカー一覧の件数
□ 総施設数 = 施設一覧の件数
□ 総求人数 = 求人一覧の件数（ステータス考慮）
□ 総応募数 = 応募一覧の件数（全施設合計）
□ マッチング数 = ステータス「マッチング済み」の件数

【計算ロジック確認】
□ マッチング率 = マッチング数 / 応募数 × 100
□ 平均応募数/求人 = 総応募数 / 総求人数
□ 前期比の計算が正しい（+/-表示）

【グラフ表示確認】
□ ユーザー推移グラフにデータが反映
□ 求人統計グラフにデータが反映
□ 応募・マッチンググラフにデータが反映
□ 期間フィルタで表示が変わる

【地域別分析】
□ 地域ごとのワーカー数が正しい
□ 地域ごとの施設数が正しい
□ 地域ごとの求人数が正しい

【エクスポート】
□ CSVエクスポートが動作する
□ エクスポートデータが正しい

テスト者: ____________
日時: ____________
```

---

## 既知の問題・注意点

1. **CSSキャッシュ問題**: スタイルが効かない場合は `Cmd+Shift+R` でハードリロード
2. **開発サーバー**: 長時間稼働で不安定になる場合は `rm -rf .next && npm run dev` で再起動
3. **セッション**: 8時間でタイムアウト

---

## 連絡先

- バグ報告: Slackの #debug チャンネル
- 緊急連絡: [担当者名]
